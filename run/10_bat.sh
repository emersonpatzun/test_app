#!/bin/bash

# SET VARS
#export DIRECTORY:
export DIRECTORIO_PROYECTO="/Users/esipac/testing/app_demo/venture"
# DEVICE UUID, GET IT BY RUNNING IN CMD: adb devices
export DEVICE=R58N338W06J
# export DEVICE=ZY225C4DM8
export DEVICE_NAME="Galaxy A71"
# APK NAME MUST BE PLACED IN "../VENTURE/APK.APK"
export APP="app_demo.apk"
# CUCUMBER PROFILE NAME IN "../VENTURE/CONFIG/CUCUMBER.YML"
export CUCUMBER_PROFILE="adr"
# NAME OF THE FEATURE FILE TO BE EXECUTED
export FEATURE="01_login.feature"
# TAGS TO FILTER IN THE EXECUTION
export TAGS="\"@regresion\""
# VARIABLES TO DETERMINE THE NAME OF THE EVIDENCE FOLDERS, DATE AND TIME OF EXECUTION
export PATH_RESULTS="$(date +'evidencia/%d%m%Y/%H%M%S/')$DEVICE"

# GO TO PROJECT VENTURE DIRECTORY TO RUN CUCUMBER
cd $DIRECTORIO_PROYECTO

# CREATE RESULTS DIRECTORY "PATH_RESULTS" S
mkdir -p "$PATH_RESULTS"

# RUN CALABASH
bundle exec calabash-android run $APP -t $TAGS ADB_DEVICE_ARG="$DEVICE" -p $CUCUMBER_PROFILE features/$FEATURE -f pretty -f html --out $PATH_RESULTS/reporte.html

exit